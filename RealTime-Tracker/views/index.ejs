<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RealTime Tracker - Live Location Tracking</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css"
        integrity="sha512-h9FcoyWjHcOcmEVkxOfTLnmZFWIH0iZhZT1H2TbOq55xssQGEJHEaIm+PgoUaZbRvQTNTluNOEfb1ZRy6D3BOw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-location-dot"></i>
                <span>RealTime Tracker</span>
            </div>
            <div class="header-stats">
                <div class="stat-item">
                    <i class="fas fa-users"></i>
                    <span id="online-count">0</span>
                    <span class="stat-label">Online</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-user-group"></i> Connected Users</h3>
            <button class="toggle-sidebar" id="toggle-sidebar">
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>
        <div class="user-list" id="user-list">
            <div class="empty-state">
                <i class="fas fa-users-slash"></i>
                <p>No users connected</p>
            </div>
        </div>
    </aside>

    <!-- Main Map Container -->
    <div id="map"></div>

    <!-- Debug Status Overlay -->
    <div id="debug-status" style="
        position: fixed;
        bottom: 100px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0,0,0,0.7);
        color: #4ade80;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.9rem;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.3s;
        z-index: 9999;
    ">Warning: No Signal</div>
    <style>
        #debug-status.active {
            opacity: 1 !important;
        }
    </style>

    <!-- Device Name Modal -->
    <div class="modal" id="device-modal">
        <div class="modal-content">
            <div class="modal-header">
                <i class="fas fa-mobile-screen-button"></i>
                <h2>Welcome to RealTime Tracker</h2>
            </div>
            <div class="modal-body">
                <p>Enter your device name to start tracking</p>
                <input type="text" id="device-name-input" placeholder="e.g., John's iPhone, Office Laptop"
                    maxlength="30" autocomplete="off">
                <button id="start-tracking" class="btn-primary">
                    <i class="fas fa-location-arrow"></i>
                    Start Tracking
                </button>
            </div>
        </div>
    </div>

    <!-- Map Controls -->
    <div class="map-controls">
        <button class="control-btn" id="recenter-btn" title="Center on my location">
            <i class="fas fa-crosshairs"></i>
        </button>
        <button class="control-btn" id="toggle-sidebar-mobile" title="Toggle user list">
            <i class="fas fa-users"></i>
        </button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"
        integrity="sha512-puJW3E/qXDqYp9IfhAI54BJEaWIfloJ7JWs7OeD5i6ruC9JZL1gERT1wjtwXFlh7CjE7ZJ+/vcRZRkIYIb6p4g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"
        integrity="sha384-mkQ3/7FUtcGyoppY6bz/PORYoGqOl7/aSUMn2ymDOJcapfS6PHqxhRTMh1RR0Q6+"
        crossorigin="anonymous"></script>
    <script src="/js/script.js"></script>
</body>

</html>
